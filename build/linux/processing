#!/bin/sh

# This script runs Processing, using the JRE in the Processing 
# installation directory.

# If your system needs a different version of Java than what's included
# in the download, replace the 'java' folder with the contents of a new
# Oracle JRE (Java 8 only), or create a symlink named "java" in the 
# Processing installation directory that points to the JRE home directory.
# This must be a Sun/Oracle JDK. For more details, see here:
# https://github.com/processing/processing/wiki/Supported-Platforms

# Get absolute path of directory where this script is located
APPDIR=$(dirname "$(readlink -f -- "$0")")

# Add all required JARs to CLASSPATH
CLASSPATH="$APPDIR/lib/*:$APPDIR/core/library/*:$APPDIR/modes/java/mode/*"
export CLASSPATH

current_name=$(basename $0)

if [ $current_name = 'processing-java' ]
then
  "$APPDIR"/java/bin/java \
    -Djna.nosys=true \
    -Djava.ext.dirs="$APPDIR"/java/lib/ext \
    -Xmx256m \
    processing.mode.java.Commander \
    "$@"
else
  "$APPDIR"/java/bin/java \
    -splash:"$APPDIR"/lib/about-1x.png \
    -Djna.nosys=true \
    -Djava.ext.dirs="$APPDIR"/java/lib/ext \
    -Xmx256m \
    processing.app.Base \
    "$@" &
fi
